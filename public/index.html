<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Honest25-AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#050505] text-zinc-300 min-h-screen flex flex-col items-center p-6">
    <div class="w-full max-w-2xl">
        <div class="flex justify-between items-center mb-10 border-b border-zinc-800 pb-4">
            <h1 class="text-xl font-black text-white tracking-widest uppercase">Honest25 AI</h1>
            <div id="badge" class="px-2 py-1 rounded bg-blue-900/30 text-blue-400 text-[10px] font-bold">SMART FALLBACK</div>
        </div>

        <div id="chat" class="space-y-6 mb-32 min-h-[300px]"></div>

        <div class="fixed bottom-8 left-1/2 -translate-x-1/2 w-full max-w-xl px-4">
            <div class="relative group">
                <input id="input" type="text" placeholder="Search with Honest25..." 
                       class="w-full p-5 pr-20 bg-zinc-900 border border-zinc-800 rounded-3xl outline-none focus:border-blue-500 transition-all shadow-2xl">
                <button onclick="ask()" class="absolute right-3 top-3 bottom-3 px-5 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-2xl transition-colors">GO</button>
            </div>
            <p id="indicator" class="text-center text-[10px] text-zinc-600 mt-3 uppercase tracking-tighter"></p>
        </div>
    </div>

    <script>
        async function ask() {
            const input = document.getElementById('input');
            const chat = document.getElementById('chat');
            const ind = document.getElementById('indicator');
            const query = input.value;
            if(!query) return;

            // User Message
            chat.innerHTML += `<div class="text-zinc-500 text-sm font-medium">Q: ${query}</div>`;
            input.value = '';
            ind.innerText = "Honest25 is checking fast models...";

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ messages: [{role: "user", content: query}] })
                });
                
                const data = await res.json();
                
                // Response with Model attribution
                ind.innerText = `Replied via: ${data.modelUsed.split('/').pop()}`;
                chat.innerHTML += `<div class="p-5 bg-zinc-900 border border-zinc-800 rounded-3xl text-white shadow-xl leading-relaxed">${data.reply}</div>`;
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
                
            } catch (e) {
                ind.innerText = "Jump failed. All models offline.";
            }
        }
    </script>
</body>
</html>
